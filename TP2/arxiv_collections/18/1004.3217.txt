Collisionless simulations of the CDM cosmology predict a plethora of dark
matter substructures in the halos of Milky Way sized galaxies, yet the number
of known luminous satellites galaxies is very much smaller, a discrepancy that
has become known as the `missing satellite problem'. The most massive
substructures have been shown to be plausibly the hosts of the brightest
satellites, but it remains unclear which processes prevent star formation in
the many other, purely dark substructures. We use high-resolution hydrodynamic
simulations of the formation of Milky Way sized galaxies in order to test how
well such self-consistent models of structure formation match the observed
properties of the Galaxy's satellite population. For the first time, we include
in such calculations feedback from cosmic rays injected into the star forming
gas by supernovae as well as the energy input from supermassive black holes
growing at the Milky Way's centre and its progenitor systems. We find that
non-thermal particle populations quite strongly suppress the star formation
efficiency of the smallest galaxies. In fact, our cosmic ray model is able to
reproduce the observed faint-end of the satellite luminosity function, while
models that include only the effects of cosmic reionization, or galactic winds,
do significantly worse. Our simulated satellite population approximately
matches available kinematic data on the satellites and their observed spatial
distribution. We conclude that a proper resolution of the missing satellite
problem likely requires the inclusion of non-standard physics for regulating
star formation in the smallest halos, and that cosmic reionization alone may
not be sufficient.