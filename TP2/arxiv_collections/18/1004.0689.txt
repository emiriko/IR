Aims: The test-field method for computing turbulent transport coefficients
from simulations of hydromagnetic flows is extended to the regime with a
magnetohydrodynamic (MHD) background. Methods: A generalized set of test
equations is derived using both the induction equation and a modified momentum
equation. By employing an additional set of auxiliary equations, we derive
linear equations describing the response of the system to a set of prescribed
test fields. Purely magnetic and MHD backgrounds are emulated by applying an
electromotive force in the induction equation analogously to the ponderomotive
force in the momentum equation. Both forces are chosen to have Roberts
flow-like geometry. Results: Examples with an MHD background are studied where
the previously used quasi-kinematic test-field method breaks down. In cases
with homogeneous mean fields it is shown that the generalized test-field method
produces the same results as the imposed-field method, where the field-aligned
component of the actual electromotive force from the simulation is used.
Furthermore, results for the turbulent diffusivity tensor are given, which are
inaccessible to the imposed-field method. For MHD backgrounds, new mean-field
effects are found that depend on the occurrence of cross-correlations between
magnetic and velocity fluctuations. For strong imposed fields, $\alpha$ is
found to be quenched proportional to the fourth power of the field strength,
regardless of the type of background studied.