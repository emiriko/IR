Optimization under uncertainty deals with the problem of optimizing
stochastic cost functions given some partial information on their inputs. These
problems are extremely difficult to solve and yet pervade all areas of
technological and natural sciences. We propose a general approach to solve such
large-scale stochastic optimization problems and a Survey Propagation based
algorithm that implements it. In the problems we consider some of the
parameters are not known at the time of the first optimization, but are
extracted later independently of each other from known distributions. As an
illustration, we apply our method to the stochastic bipartite matching problem,
in the two-stage and multi-stage cases. The efficiency of our approach, which
does not rely on sampling techniques, allows us to validate the analytical
predictions with large-scale numerical simulations.