This paper works out fair values of stock loan model with automatic
termination clause, cap and margin. This stock loan is treated as a generalized
perpetual American option with possibly negative interest rate and some
constraints. Since it helps a bank to control the risk, the banks charge less
service fees compared to stock loans without any constraints. The automatic
termination clause, cap and margin are in fact a stop order set by the bank.
Mathematically, it is a kind of optimal stopping problems arising from the
pricing of financial products which is first revealed. We aim at establishing
explicitly the value of such a loan and ranges of fair values of key parameters
: this loan size, interest rate, cap, margin and fee for providing such a
service and quantity of this automatic termination clause and relationships
among these parameters as well as the optimal exercise times. We present
numerical results and make analysis about the model parameters and how they
impact on value of stock loan.