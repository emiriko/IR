We use resistive magnetohydrodynamical simulations with the nested grid
technique to study the formation of protoplanetary disks around protostars from
molecular cloud cores that provide the realistic environments for planet
formation. We find that gaseous planetary-mass objects are formed in the early
evolutionary phase by gravitational instability in regions that are decoupled
from the magnetic field and surrounded by the injection points of the
magnetohydrodynamical outflows during the formation phase of protoplanetary
disks. Magnetic decoupling enables massive disks to form and these are subject
to gravitational instability, even at ~ 10 AU. The frequent formation of
planetary-mass objects in the disk suggests the possibility of constructing a
hybrid planet formation scenario, where the rocky planets form later under the
influence of the giant planets in the protoplanetary disk.