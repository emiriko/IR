The universality of the halo mass function is investigated in the context of
dark energy cosmologies. This widely used approximation assumes that the mass
function can be expressed as a function of the matter density omega_m and the
rms linear density fluctuation sigma only, with no explicit dependence on the
properties of dark energy or redshift. In order to test this hypothesis we run
a series of 15 high-resolution N-body simulations for different cosmological
models. These consists of three LCDM cosmologies best fitting WMAP-1, 3 and 5
years data, and three toy-models characterized by a Ratra-Peebles quintessence
potential with different slopes and amounts of dark energy density. These toy
models have very different evolutionary histories at the background and linear
level, but share the same sigma8 value. For each of these models we measure the
mass function from catalogues of halos identified in the simulations using the
Friend-of-Friend (FoF) algorithm. We find redshift dependent deviations from a
universal behaviour, well above numerical uncertainties and of non-stochastic
origin, which are correlated with the linear growth factor of the investigated
cosmologies. Using the spherical collapse as guidance, we show that such
deviations are caused by the cosmology dependence of the non-linear collapse
and virialization process. For practical applications, we provide a fitting
formula of the mass function accurate to 5 percents over the all range of
investigated cosmologies. We also derive an empirical relation between the FoF
linking parameter and the virial overdensity which can account for most of the
deviations from an exact universal behavior. Overall these results suggest that
the halo mass function contains unique cosmological information since it
carries a fossil record of the past cosmic evolution.