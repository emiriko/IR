The Jarzynski equality (JE) is known as an exact identity for nonequillibrium
systems. The JE was originally formulated for isolated and isothermal systems,
while Adib reported an JE extended to an isoenergetic process. In this paper,
we extend the JE to an energy-controlled system. We make it possible to control
the instantaneous value of the energy arbitrarily in a nonequilibrium process.
Under our extension, the new JE is more practical and useful to calculate the
number of states and the entropy than the isoenergetic one. We also show
application of our JE to a kind of optimization problems.