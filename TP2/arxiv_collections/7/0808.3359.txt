We calculate the Josephson current in a diffusive
superconductor/ferromagnet/superconductor junction, where the ferromagnetic
region contains multiple layers (or domains). In particular, we study a
configuration where there are two layers with an arbitrary relative in-plane
magnetization orientation, and also include non-ideal interfaces and arbitrary
spin-flip scattering. We study the 0-$\pi$ oscillations of the critical current
for varying junction width $d$, and find that the $\pi$ state vanishes entirely
when the magnetic misorientation angle of the two layers exceeds a critical
angle $\phi_c$. While $\phi_c \to \pi/2$ in the limit of high temperatures, we
find that $\phi_c$ becomes smaller than $\pi/2$ at low temperatures compared to
$T_c$. 0-$\pi$ oscillations are also found when varying the temperature or the
misorientation angle for fixed values of $d$, and we present phase diagrams
that show qualitatively the conditions for the appearance of such oscillations.
We also point out how one may obtain significant enhancement of the critical
current in such a system by switching the magnetization for selected values of
the junction width $d$, and comment on the necessary conditions for
establishing a long range triplet Josephson effect.