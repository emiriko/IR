Under suitable hypotheses, we construct a probability measure on the set of
closed maximal isotropic subspaces of a locally compact quadratic space over
F_p. A random subspace chosen with respect to this measure is discrete with
probability 1, and the dimension of its intersection with a fixed compact open
maximal isotropic subspace is a certain nonnegative-integer-valued random
variable.
  We then prove that the p-Selmer group of an elliptic curve is naturally the
intersection of a discrete maximal isotropic subspace with a compact open
maximal isotropic subspace in a locally compact quadratic space over F_p. By
modeling the first subspace as being random, we can explain the known phenomena
regarding distribution of Selmer ranks, such as the theorems of Heath-Brown,
Swinnerton-Dyer, and Kane for 2-Selmer groups in certain families of quadratic
twists, and the average size of 2- and 3-Selmer groups as computed by Bhargava
and Shankar. Our model is compatible with Delaunay's heuristics for p-torsion
in Shafarevich-Tate groups, and predicts that the average rank of elliptic
curves over a fixed number field is at most 1/2. Many of our results generalize
to abelian varieties over global fields.