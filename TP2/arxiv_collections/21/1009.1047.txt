In practical quantum key distribution (QKD) system, the state preparation and
measurement are imperfect comparing with the ideal BB84 protocol, which are
always state-dependent in practical realizations. If the state-dependent
imperfections can not be regarded as an unitary transformation, it should not
be considered as part of quantum channel noise introduced by the eavesdropper,
the commonly used secret key rate formula GLLP can not be applied
correspondingly. In this paper, the unconditional security of quantum key
distribution with state-dependent imperfection has been analyzed by estimating
the upper bound of the phase error rate about the quantum channel.