We present a direct method for isolating the component of the starlight
blocked by a planet as it transits its host star, and apply it to spectra of
the bright transiting planet HD 189733b. We model the global shape of the
stellar cross-correlation function as the convolution of a limb-darkened
rotation profile and a gaussian representing the Doppler core of the average
photospheric line profile. The light blocked by the planet during the transit
is a gaussian of the same intrinsic width, whose trajectory across the line
profile yields a precise measure of the misalignment angle and an independent
measure of v sin I. We show that even when v sin I is less than the width of
the intrinsic line profile, the travelling Doppler "shadow" cast by the planet
creates an identifiable distortion in the line profiles which is amenable to
direct modelling. Direct measurement of the trajectory of the missing starlight
yields self-consistent measures of the projected stellar rotation rate, the
intrinsic width of the mean local photospheric line profile, the projected
spin-orbit misalignment angle, and the system's centre-of-mass velocity.
Combined with the photometric rotation period, the results give a geometrical
measure of the stellar radius which agrees closely with values obtained from
high-precision transit photometry if a small amount of differential rotation is
present in the stellar photosphere.