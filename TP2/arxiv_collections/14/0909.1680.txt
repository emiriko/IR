We derive and investigate a general non-Markovian equation for the
time-dependence of a Hamiltonian that maximizes the fidelity of a desired
quantum gate on any finite-dimensional quantum system in the presence of
arbitrary bath and noise sources. The method is illustrated for a single-qubit
gate implemented on a three-level system.