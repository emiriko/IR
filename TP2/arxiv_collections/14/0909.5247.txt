We investigate the properties of both the prompt and X-ray afterglows of
gamma-ray bursts (GRBs) in the burst frame with a sample of 33 Swift GRBs.
Assuming that the steep decay segment in the canonical X-ray afterglow
lightcurves is due to the curvature effect, we fit the lightcurves with a
broken power-law to derive the zero time of the last emission epoch of the
prompt emission (t1) and the beginning as well as the end time of the shallow
decay segment (t2 and t3).We show that both the isotropic peak gamma-ray
luminosity and gamma-ray energy are correlated with the isotropic X-ray energy
of the shallow decay phase and the isotropic X-ray luminosity at t2. We infer
the properties of the progenitor stars based on a model proposed by Kumar et
al. who suggested that both the prompt gamma-rays and the X-ray afterglows are
due to the accretions of different layers of materials of the GRB progenitor
star by a central black hole (BH). We find that most of the derived masses of
the core layers are 0.1-5 solar mass with a radius of 10^8-10^10 cm. The
rotation parameter is correlated with the burst duration, being consistent with
the expectation of collapsar models. The estimated radii and the masses of the
fall-back materials for the envelope layers are 10^10-10^12 cm and 10^-3~1
solar mass, respectively. The average accretion rates in the shallow decay
phase are correlated with those in the prompt gamma-ray phase, but they are
much lower. The derived radii of the envelope are smaller than the photospheric
radii of Wolf-Rayet (WR) stars. It is interesting that the assembled mass
density profile for the bursts in our sample is also well consistent with the
simulation for a pre-supernova star with 25 solar mass.