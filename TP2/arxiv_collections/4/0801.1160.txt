We study deformations of the A-model in the presence of fluxes, by which we
mean rank-three tensors with antisymmetrized upper/lower indices, using the
AKSZ construction. Generically these are topological membrane models, and we
show that the fluxes are related to deformations of the Courant bracket which
generalize the twist by a closed 3-from $H$, in the sense that satisfying the
AKSZ master equation implies the integrability conditions for an almost
generalized complex structure with respect to the deformed Courant bracket. In
addition, the master equation imposes conditions on the fluxes that generalize
$dH=0$. The membrane model can be defined on a large class of $U(m)$- and $U(m)
\times U(m)$-structure manifolds, including geometries inspired by $(1,1)$
supersymmetric $\sigma$-models with additional supersymmetries due to almost
complex (but not necessarily complex) structures in the target space.
Furthermore, we show that the model can be defined on three particular
half-flat manifolds related to the Iwasawa manifold.
  When only $H$-flux is turned on it is possible to obtain a topological string
model, which we do for the case of a Calabi-Yau with a closed 3-form turned on.
The simplest deformation from the A-model is due to the $(2,0)+ (0,2)$
component of a non-trivial $b$-field. The model is generically no longer
evaluated on holomorphic maps and defines new topological invariants.
Deformations due to $H$-flux can be more radical, completely preventing
auxiliary fields from being integrated out.