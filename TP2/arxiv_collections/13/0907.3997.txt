We have performed a coupled channel calculation of the $1^{++}$ $c\bar c$
sector including $q\bar q$ and $DD^*$ molecular configurations. The calculation
was done within a constituent quark model which successfully describes the
meson spectrum, in particular the $c\bar c$ $1^{--}$ sector. Two and four quark
configurations are coupled using the $^3P_0$ model. The elusive X(3872) meson
appears as a new state with a high probability for the $DD^*$ molecular
component. When the mass difference between neutral and charged states is
included a large $D^0 {D^*}^0$ component is found which dominates for large
distances and breaks isospin symmetry in the physical state. The original
$c\bar c(2 ^3P_1)$ state acquires a sizable $DD^*$ component and can be
identified with the X(3940). We study the $B\to K \pi^+ \pi^-J/\psi$ and $B\to
K D^0 D^{*0}$ decays finding a good agreement with Belle and BaBar experimental
data.