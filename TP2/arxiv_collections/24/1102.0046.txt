The excursion set theory, where density perturbations evolve stochastically
with the smoothing scale, provides a method for computing the dark matter halo
mass function. The computation of the mass function is mapped into the
so-called first-passage time problem in the presence of a moving barrier. The
excursion set theory is also a powerful formalism to study other properties of
dark matter halos such as halo bias, accretion rate, formation time, merging
rate and the formation history of halos. This is achieved by computing
conditional probabilities with non-trivial initial conditions, and the
conditional two-barrier first-crossing rate. In this paper we use the path
integral formulation of the excursion set theory to calculate analytically
these conditional probabilities in the presence of a generic moving barrier,
including the one describing the ellipsoidal collapse, and for both Gaussian
and non-Gaussian initial conditions. While most of our analysis associated with
Gaussian initial conditions assumes Markovianity (top-hat in momentum space
smoothing, rather than generic filters), the non-Markovianity of the random
walks induced by non-Gaussianity is consistently accounted for. We compute, for
a generic barrier, the first two scale-independent halo bias parameters, the
conditional mass function and the halo formation time probability, including
the effects of non-Gaussianities. We also provide the expression for the
two-constant-barrier first-crossing rate when non-Markovian effects are induced
by a top-hat filter function in real space.