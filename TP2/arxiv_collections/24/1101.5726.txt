We use quantum Monte Carlo (QMC) simulations to study the combined effects of
harmonic confinement and temperature for bosons in a two dimensional optical
lattice. The scale invariant, finite temperature, state diagram is presented
for the Bose-Hubbard model in terms of experimental parameters -- the particle
number, confining potential and interaction strength. To distinguish the nature
of the spatially separated superfluid, Mott Insulator and normal Bose liquid
phases, we examine the local density, compressibility, superfluid density and
Green's function. In the annular superfluid rings, as the width of the ring
decreases, the long range superfluid correlations start to deviate from an
equivalent homogeneous 2D system. At zero temperature, the correlation decay is
intermediate between 1D and 2D, while at finite temperature, the decay is
similar to that in 1D at a much lower temperature. The calculations reveal
shortcomings of the local density approximation (LDA) in describing superfluid
properties of trapped bosons. We also present the finite temperature phase
diagram for the homogeneous two dimensional Bose-Hubbard model. We compare our
state diagram with the results of a recent experiment at NIST on a harmonically
trapped 2D lattice [Phys. Rev. Lett. 105, 110401 (2010)], and identify a finite
temperature effect in the experiment.