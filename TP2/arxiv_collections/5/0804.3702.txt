The in-medium spectral functions of $\rho$ and $\omega$ mesons and the
broadening of the nucleon resonances at finite baryon density are calculated
self-consistently by combining a resonance dominance model for the vector meson
production with an extended vector meson dominance model. The influence of the
in-medium modifications of the vector meson properties on the dilepton spectrum
in heavy-ion collisions is investigated. The dilepton spectrum is generated for
the C+C reaction at 2.0$A$ GeV and compared with recent HADES Collaboration
data. The collision dynamics is then described by the T\"ubingen relativistic
quantum molecular dynamics transport model. We find that an iterative
calculation of the vector meson spectral functions that takes into account the
broadening of the nucleon resonances due to their increased in-medium decay
branchings is convergent and provides a reasonable description of the
experimental data in the mass region $0.45\leq M \leq 0.75$ GeV. On the other
side, the theoretical calculations slightly underestimate the region $m_\pi\leq
M \leq 0.4$ GeV. Popular in-medium scenarios such as a schematic collisional
broadening and dropping vector mesons masses are discussed as well.