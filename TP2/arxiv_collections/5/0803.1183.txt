We construct a non-Markovian canonical dynamical map that accounts for
systems correlated with the environment. The physical meaning of not completely
positive maps is studied to obtain a theory of non-Markovian quantum dynamics.
The relationship between inverse maps and correlations with the environment is
established. A generalized non-Markovian master equation is derived from the
canonical dynamical map that goes beyond the Kossakowski-Lindblad Markovian
master equation. Non-equilibrium quantum thermodynamics can be be studied
within this theory.