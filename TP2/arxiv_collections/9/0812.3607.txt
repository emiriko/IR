We introduce symmetric extensions of bipartite quantum states as a tool for
analyzing protocols that distill secret key from quantum correlations. Whether
the correlations are coming from a prepare-and-measure quantum key distribution
scheme or from an entanglement-based scheme, the protocol has to produce
effective states without a symmetric extension in order to succeed. By
formulating the symmetric extension problem as a semidefinite program, we solve
the problem for Bell-diagonal states. Applying this result to the six-state and
BB84 schemes, we show that for the entangled states that cannot be distilled by
current key distillation procedures, the failure can be understood in terms of
a failure to break a symmetric extension.