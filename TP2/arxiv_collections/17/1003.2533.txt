The correlation between geomagnetic activity and the sunspot number in the
11-year solar cycle exhibits long-term variations due to the varying time lag
between the sunspot-related and non-sunspot related geomagnetic activity, and
the varying relative amplitude of the respective geomagnetic activity peaks. As
the sunspot-related and non-sunspot related geomagnetic activity are caused by
different solar agents, related to the solar toroidal and poloidal fields,
respectively, we use their variations to derive the parameters of the solar
dynamo transforming the poloidal field into toroidal field and back. We find
that in the last 12 cycles the solar surface meridional circulation varied
between 5 and 20 m/s (averaged over latitude and over the sunspot cycle), the
deep circulation varied between 2.5 and 5.5 m/s, and the diffusivity in the
whole of the convection zone was ~10**8 m2/s. In the last 12 cycles solar
dynamo has been operating in moderately diffusion dominated regime in the bulk
of the convection zone. This means that a part of the poloidal field generated
at the surface is advected by the meridional circulation all the way to the
poles, down to the tachocline and equatorward to sunspot latitudes, while
another part is diffused directly to the tachocline at midlatitudes,
"short-circuiting" the meridional circulation. The sunspot maximum is the
superposition of the two surges of toroidal field generated by these two parts
of the poloidal field, which is the explanation of the double peaks and the
Gnevyshev gap in sunspot maximum. Near the tachocline, dynamo has been
operating in diffusion dominated regime in which diffusion is more important
than advection, so with increasing speed of the deep circulation the time for
diffusive decay of the poloidal field decreases, and more toroidal field is
generated leading to a higher sunspot maximum. During the Maunder minimum the
dynamo was operating in advection dominated regime near the tachocline, with
the transition from diffusion dominated to advection dominated regime caused by
a sharp drop in the surface meridional circulation which is in general the most
important factor modulating the amplitude of the sunspot cycle.