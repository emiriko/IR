Star formation is a complex process involving the interplay of many physical
effects, including gravity, turbulent gas dynamics, magnetic fields and
radiation. Our understanding of the process has improved substantially in
recent years, primarily as a result of our increased ability to incorporate the
relevant physics in numerical calculations of the star formation process. In
this contribution we present an overview of our recent studies of star cluster
formation in turbulent, magnetised clouds using self-gravitating
radiation-magnetohydrodynamics calculations (Price and Bate 2008, 2009). Our
incorporation of magnetic fields and radiative transfer into the Smoothed
Particle Hydrodynamics method are discussed. We highlight how magnetic fields
and radiative heating of the gas around newborn stars can solve several of the
key puzzles in star formation, including an explanation for why star formation
is such a slow and inefficient process. However, the presence of magnetic
fields at observed strengths in collapsing protostellar cores also leads to
problems on smaller scales, including a difficulty in forming protostellar
discs and binary stars (Price and Bate 2007, Hennebelle and Teyssier 2008),
which suggests that our understanding of the role of magnetic fields in star
formation is not yet complete.