We describe an ultrafast time resolved pump-probe spectroscopy setup aimed at
studying the switching of nanophotonic structures. Both fs pump and probe
pulses can be independently tuned over broad frequency range between 3850 and
21050 cm$^{-1}$. A broad pump scan range allows a large optical penetration
depth, while a broad probe scan range is crucial to study strongly photonic
crystals. A new data acquisition method allows for sensitive pump-probe
measurements, and corrects for fluctuations in probe intensity and pump stray
light. We observe a tenfold improvement of the precision of the setup compared
to laser fluctuations, allowing a measurement accuracy of better than
$\Delta$R= 0.07% in a 1 s measurement time. Demonstrations of the improved
technique are presented for a bulk Si wafer, a 3D Si inverse opal photonic
bandgap crystal, and z-scan measurements of the two-photon absorption
coefficient of Si, GaAs, and the three-photon absorption coefficient of GaP in
the infrared wavelength range.