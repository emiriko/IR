At present, many laboratories are performing experiments to simulate
theoretical models of strongly correlated systems using cold atoms in optical
lattices, a program referred to as "Quantum Simulation". It is hoped that these
experiments will shed light on some long standing problems in condensed matter
physics. The goal of Quantum Simulation is to obtain information of homogenous
bulk systems. However, experiments are performed in confining traps. The
non-uniformity of the trapping potential inevitably introduces different phases
in the sample, making it difficult to deduce the properties of a single bulk
phase. So far, there are no algorithms to use the experimental data to map out
phase diagrams and important thermodynamic quantities. Here, we present an
algorithm to achieve this goal. Apart from phase diagram, it also maps out
entropy density, superfluid density of superfluids, and staggered
magnetizations of anti-ferromagnets. Our scheme is exact within local density
approximation.