The famous Erdos-Heilbronn conjecture plays an important role in the
development of additive combinatorics. In 2007 Z. W. Sun made the following
further conjecture (which is the linear extension of the Erdos-Heilbronn
conjecture): For any finite subset A of a field F and nonzero elements
$a_1,...,a_n$ of F, the set {a_1x_1+...+a_nx_n: x_1,....,x_n are distinct
elements of A} has cardinality at least min{p(F)-delta, n(|A|-n)+1}, where the
additive order p(F) of the multiplicative identity of F is different from n+1,
and delta=0,1 takes the value 1 if and only if n=2 and $a_1+a_2=0$. In this
paper we prove this conjecture of Sun when $p(F)\geq n(3n-5)/2$. We also obtain
a sharp lower bound for the cardinality of the restricted sumset {x_1+...+x_n:
x_1\in A_1,...,x_n\in A_n, and P(x_1,...,x_n)\not=0}, where $A_1,...,A_n$ are
finite subsets of a field F and $P(x_1,...,x_n)$ is a general polynomial over
F.