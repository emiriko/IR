We study the structure of renormalization Hopf algebras of gauge theories. We
identify certain Hopf subalgebras in them, whose character groups are
semidirect products of invertible formal power series with formal
diffeomorphisms. This can be understood physically as wave function
renormalization and renormalization of the coupling constants, respectively.
After taking into account the Slavnov-Taylor identities for the couplings as
generators of a Hopf ideal, we find Hopf subalgebras in the corresponding
quotient as well.
  In the second part of the paper, we explain the origin of these Hopf ideals
by considering a coaction of the renormalization Hopf algebras on the
Batalin-Vilkovisky (BV) algebras generated by the fields and couplings
constants. The so-called classical master equation satisfied by the action in
the BV-algebra implies the existence of the above Hopf ideals in the
renormalization Hopf algebra. Finally, we exemplify our construction by
applying it to Yang-Mills gauge theory.