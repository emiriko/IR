Electromagnetically induced transparency (EIT) has been often proposed for
generating nonlinear optical effects at the single photon level; in particular,
as a means to effect a quantum non-demolition measurement of a single photon
field. Previous treatments have usually considered homogeneously broadened
samples, but realisations in any medium will have to contend with inhomogeneous
broadening. Here we reappraise an earlier scheme [Munro \textit{et al.} Phys.
Rev. A \textbf{71}, 033819 (2005)] with respect to inhomogeneities and show an
alternative mode of operation that is preferred in an inhomogeneous
environment. We further show the implications of these results on a potential
implementation in diamond containing nitrogen-vacancy colour centres. Our
modelling shows that single mode waveguide structures of length $200
\mu\mathrm{m}$ in single-crystal diamond containing a dilute ensemble of NV$^-$
of only 200 centres are sufficient for quantum non-demolition measurements
using EIT-based weak nonlinear interactions.