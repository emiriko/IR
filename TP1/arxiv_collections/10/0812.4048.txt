We analyze the performance of a protocol to prepare an atomic ensemble in a
superposition of two macroscopically distinguishable states. The protocol
relies on conditional measurements performed on a light field, which interacts
with the atoms inside an optical cavity prior to detection, and we investigate
cavity enhanced probing with continuous beams of both coherent and squeezed
light. The stochastic master equations used in the analysis are expressed in
terms of the Hamiltonian of the probed system and the interaction between the
probed system and the probe field and are thus quite generally applicable.