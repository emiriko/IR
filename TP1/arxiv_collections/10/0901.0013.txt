Decoy state protocols are a useful tool for many quantum key distribution
systems implemented with weak coherent pulses, allowing significantly better
secret bit rates and longer maximum distances. In this paper we present a
method to numerically find optimal three-level protocols, and we examine how
the secret bit rate and the optimized parameters are dependent on various
system properties, such as session length, transmission loss, and visibility.
Additionally, we show how to modify the decoy state analysis to handle
partially distinguishable decoy states as well as uncertainty in the prepared
intensities.