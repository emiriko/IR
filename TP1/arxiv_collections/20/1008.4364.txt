We present a numerical simulation of a gamma-ray burst jet from a
long-lasting engine in the core of a 16 solar mass Wolf-Rayet star. The engine
is kept active for 6000 s with a luminosity that decays in time as a power-law
with index -5/3. Even though there is no short time-scale variability in the
injected engine luminosity, we find that the jet's kinetic luminosity outside
the progenitor star is characterized by fluctuations with relatively short time
scale. We analyze the temporal characteristics of those fluctuations and we
find that they are consistent with the properties of observed flares in X-ray
afterglows. The peak to continuum flux ratio of the flares in the simulation is
consistent with some, but not all, the observed flares. We propose that
propagation instabilities, rather than variability in the engine luminosity,
are responsible for the X-ray flares with moderate contrast. Strong flares such
as the one detected in GRB 050502B, instead, cannot be reproduced by this model
and require strong variability in the engine activity.