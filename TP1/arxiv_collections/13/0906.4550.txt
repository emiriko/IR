The PAMELA, Fermi and HESS experiments (PFH) have shown anomalous excesses in
the cosmic positron and electron fluxes. A very exciting possibility is that
those excesses are due to annihilating dark matter (DM). In this paper we
calculate constraints on leptonically annihilating DM using observational data
on diffuse extragalactic gamma-ray background and measurements of the optical
depth to the last-scattering surface, and compare those with the PFH favored
region in the m_{DM} - <\sigma_A v> plane. Having specified the detailed form
of the energy input with PYTHIA Monte Carlo tools we solve the radiative
transfer equation which allows us to determine the amount of energy being
absorbed by the cosmic medium and also the amount left over for the diffuse
gamma background. We find that the constraints from the optical depth
measurements are able to rule out the PFH favored region fully for the
\tau^{-}+\tau^{+} annihilation channel and almost fully for the \mu^{-}+\mu^{+}
annihilation channel. It turns out that those constraints are quite robust with
almost no dependence on low redshift clustering boost. The constraints from the
gamma-ray background are sensitive to the assumed halo concentration model and,
for the power law model, rule out the PFH favored region for all leptonic
annihilation channels. We also find that it is possible to have models that
fully ionize the Universe at low redshifts. However, those models produce too
large free electron fractions at z > ~100 and are in conflict with the optical
depth measurements. Also, the magnitude of the annihilation cross-section in
those cases is larger than suggested by the PFH data.