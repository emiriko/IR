We develop the theory of a metamaterial composed of an array of discrete
quantum absorbers inside a one-dimensional waveguide that implements a
high-efficiency microwave photon detector. A basic design consists of a few
metastable superconducting nanocircuits spread inside and coupled to a
one-dimensional waveguide in a circuit QED setup. The arrival of a {\it
propagating} quantum microwave field induces an irreversible change in the
population of the internal levels of the absorbers, due to a selective
absorption of photon excitations. This design is studied using a formal but
simple quantum field theory, which allows us to evaluate the single-photon
absorption efficiency for one and many absorber setups. As an example, we
consider a particular design that combines a coplanar coaxial waveguide with
superconducting phase qubits, a natural but not exclusive playground for
experimental implementations. This work and a possible experimental realization
may stimulate the possible arrival of "all-optical" quantum information
processing with propagating quantum microwaves, where a microwave photodetector
could play a key role.