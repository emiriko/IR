The Kibble-Zurek mechanism is applied to the spontaneous formation of
vortices in a harmonically trapped thermal gas following a temperature quench
through the critical value for Bose-Einstein condensation. While in the
homogeneous scenario vortex nucleation is always expected, we show that it can
be completely suppressed in the presence of the confinement potential, whenever
the speed of the spatial front undergoing condensation is lower than a
threshold velocity. Otherwise, the interplay between the geometry and causality
leads to different scaling laws for the density of vortices as a function of
the quench rate, as we also illustrate for the case of a toroidal trapping
potential.