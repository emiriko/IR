Context: Chemical models of dense cloud cores often utilize the so-called
pseudo-time-dependent approximation, in which the physical conditions are held
fixed and uniform as the chemistry occurs. In this approximation, the initial
abundances chosen, which are totally atomic in nature except for molecular
hydrogen, are artificial. A more detailed approach to the chemistry of dense
cold cores should include the physical evolution during their early stages of
formation. Aims: Our major goal is to investigate the initial synthesis of
molecular ices and gas-phase molecules as cold molecular gas begins to form
behind a shock in the diffuse interstellar medium. The abundances calculated as
the conditions evolve can then be utilized as reasonable initial conditions for
a theory of the chemistry of dense cores. Methods: Hydrodynamic shock-wave
simulations of the early stages of cold core formation are used to determine
the time-dependent physical conditions for a gas-grain chemical network. We
follow the cold post-shock molecular evolution of ices and gas-phase molecules
for a range of visual extinction up to AV ~ 3, which increases with time. At
higher extinction, self-gravity becomes important. Results: As the newly
condensed gas enters its cool post-shock phase, a large amount of CO is
produced in the gas. As the CO forms, water ice is produced on grains, while
accretion of CO produces CO ice. The production of CO2 ice from CO occurs via
several surface mechanisms, while the production of CH4 ice is slowed by
gas-phase conversion of C into CO.