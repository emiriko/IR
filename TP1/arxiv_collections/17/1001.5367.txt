The charge and spin diffusion equations taking into account spin-flip and
spin-transfer torque were numerically solved using a finite element method in
complex non-collinear geometry with strongly inhomogeneous current flow. As an
illustration, spin-dependent transport through a non-magnetic nanoconstriction
separating two magnetic layers was investigated. Unexpected results such as
vortices of spin-currents in the vicinity of the nanoconstriction were
obtained. The angular variations of magnetoresistance and spin-transfer torque
are strongly influenced by the structure geometry.