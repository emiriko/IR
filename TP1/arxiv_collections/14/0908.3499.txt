We define and investigate deformed n-Calabi-Yau completions of homologically
smooth differential graded (=dg) categories. Important examples are: deformed
preprojective algebras of connected non Dynkin quivers, Ginzburg dg algebras
associated to quivers with potentials and dg categories associated to the
category of coherent sheaves on the canonical bundle of a smooth variety. We
show that deformed Calabi-Yau completions do have the Calabi-Yau property and
that their construction is compatible with derived equivalences and with
localizations. In particular, Ginzburg dg algebras have the Calabi-Yau
property. We show that deformed 3-Calabi-Yau completions of algebras of global
dimension at most 2 are quasi-isomorphic to Ginzburg dg algebras and apply this
to the study of cluster-tilted algebras and to the construction of derived
equivalences associated to mutations of quivers with potentials. In the
appendix, Michel Van den Bergh uses non commutative differential geometry to
give an alternative proof of the fact that Ginzburg dg algebras have the
Calabi-Yau property.