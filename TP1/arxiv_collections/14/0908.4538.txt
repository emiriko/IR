In this paper the utility optimization problem for a general insurance model
is studied. The reserve process of the insurance company is described by a
stochastic differential equation driven by a Brownian motion and a Poisson
random measure, representing the randomness from the financial market and the
insurance claims, respectively. The random safety loading and stochastic
interest rates are allowed in the model so that the reserve process is
non-Markovian in general. The insurance company can manage the reserves through
both portfolios of the investment and a reinsurance policy to optimize a
certain utility function, defined in a generic way. The main feature of the
problem lies in the intrinsic constraint on the part of reinsurance policy,
which is only proportional to the claim-size instead of the current level of
reserve, and hence it is quite different from the optimal
investment/consumption problem with constraints in finance. Necessary and
sufficient conditions for both well posedness and solvability will be given by
modifying the ``duality method'' in finance and with the help of the
solvability of a special type of backward stochastic differential equations.