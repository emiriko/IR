We construct a stationary density functional for the partition function from
a chosen set of one (boson) line irreducible Feynman diagrams. The construction
does not proceed by the inversion of a Legendre transform. It is formulated for
fermions with Coulomb interactions, in which case a stationary functional of
the particle density is contructed, as well as for nucleons interacting with
mesons, which involves a stationary functional of several densities. The use of
Kohn-Sham orbits is shown to be an unnecessary complication.