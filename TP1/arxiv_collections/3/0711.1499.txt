We present a formula to evaluate the spontaneous emission spectra of an atom
in contact with a radiation field with non-Markovian effects. This formula is
written in terms of a two-time correlation of system observables and the
environmental correlation function, and depends on the distance between the
emitting atom and the detector. As an example, we use it to analyze the
fluorescence spectra of a two level atom placed as an impurity in a photonic
crystal. The radiation field within those materials has a gap or discontinuity
where electromagnetic modes cannot propagate in the stationary limit. In that
situation, the atomic emission occurs in the form of evanescent waves which are
detected with less efficiency the farther we place the detector. The
methodology presented in this paper may be useful to study the non-Markovian
dynamics of any quantum open system in linear interaction with a harmonic
oscillator reservoir and within the weak coupling approximation.