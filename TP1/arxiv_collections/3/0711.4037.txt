Nonlinear effects in pulse propagation through a medium consisting of
four-level double-$\Lambda$-type systems are studied theoretically. We apply
three continous-wave driving fields and a pulsed probe field such that they
form a closed interaction loop. Due to the closed loop and the finite frequency
width of the probe pulses the multiphoton resonance condition cannot be
fulfilled, such that a time-dependent analysis is required. By identifying the
different underlying physical processes we determine the parts of the solution
relevant to calculate the linear and nonlinear response of the system. We find
that the system can exhibit a strong intensity dependent refractive index with
small absorption over a range of several natural linewidths. For a realistic
example we include Doppler and pressure broadening and calculate the nonlinear
selfphase modulation in a gas cell with Sodium vapor and Argon buffer gas. We
find that a selfphase modulation of $\pi$ is achieved after a propagation of
few centimeters through the medium while the absorption in the corresponding
spectral range is small.