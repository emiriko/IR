We develop a new framework of the deformed quasiparticle-random-phase
approximation (QRPA) where the Skyrme density functional and the
density-dependent pairing functional are consistently treated. Numerical
applications are carried out for the isovector dipole and the isoscalar
quadrupole modes in the spherical $^{20}$O and in the deformed $^{26}$Ne
nuclei, and the effect of the momentum dependent terms of the Skyrme effective
interaction for the energy-weighted sum rule is discussed. As a further
application, we present for the first time the moments of inertia of $^{34}$Mg
and $^{36}$Mg using the Thouless-Valatin procedure based on the self-consistent
deformed QRPA, and show the applicability of our new calculation scheme not
only for the vibrational modes but also for the rotational modes in
neutron-rich nuclei.