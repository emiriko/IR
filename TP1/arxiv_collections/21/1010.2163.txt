We show that the noncontextual inequality proposed by Klyachko et al. [Phys.
Rev. Lett. 101, 020403 (2008)] belongs to a broader family of inequalities, one
associated to each compatibility structure of a set of events (a graph), and
its independence number. These have the surprising property that the maximum
quantum violation is given by the Lovasz theta-function of the graph, which was
originally proposed as an upper bound on its Shannon capacity. Furthermore,
probabilistic theories beyond quantum mechanics may have an even larger
violation, which is given by the so-called fractional packing number. We
discuss in detail, and compare, the sets of probability distributions
attainable by noncontextual, quantum, and generalized models; the latter two
are shown to have semidefinite and linear characterizations, respectively. The
implications for Bell inequalities, which are examples of noncontextual
inequalities, are discussed. In particular, we show that every Bell inequality
can be recast as a noncontextual inequality a la Klyachko et al.