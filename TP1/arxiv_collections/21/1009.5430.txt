We describe a variational procedure for calculating the energy of an electron
gas in which the long-range Coulomb interaction is truncated by the screening
effect of a nearby metallic gate. We use this procedure to compute the quantum
capacitance of the system as a function of electron density and spin
polarization. The accuracy of the method is verified against published
Monte-Carlo data. The results compare favorably with a recent experiment.