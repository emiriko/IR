We use high-resolution Aquarius simulations of Milky Way-sized haloes in the
LCDM cosmology to study the effects of dark matter substructures on
gravitational lensing. Each halo is resolved with ~ 10^8 particles (at a mass
resolution ~ 10^3-4 M_sun/h) within its virial radius. Subhaloes with masses
larger than 10^5 M_sun/h are well resolved, an improvement of at least two
orders of magnitude over previous lensing studies. We incorporate a baryonic
component modelled as a Hernquist profile and account for the response of the
dark matter via adiabatic contraction. We focus on the "anomalous" flux ratio
problem, in particular on the violation of the cusp-caustic relation due to
substructures. We find that subhaloes with masses less than ~ 10^8 M_sun/h play
an important role in causing flux anomalies; such low mass subhaloes have been
unresolved in previous studies. There is large scatter in the predicted flux
ratios between different haloes and between different projections of the same
halo. In some cases, the frequency of predicted anomalous flux ratios is
comparable to that observed for the radio lenses, although in most cases it is
not. The probability for the simulations to reproduce the observed violations
of the cusp lenses is about 0.001. We therefore conclude that the amount of
substructure in the central regions of the Aquarius haloes is insufficient to
explain the observed frequency of violations of the cusp-caustic relation.
These conclusions are based purely on our dark matter simulations which ignore
the effect of baryons on subhalo survivability.