Context: During solar flares a large number of charged particles are
accelerated to high energies, but the exact mechanism responsible for this is,
so far, still unclear. Acceleration in collapsing magnetic traps is one of the
mechanisms proposed.
  Aims: In the present paper we want to extend previous 2D models for
collapsing magnetic traps to 3D models and to 2D models with shear flow.
  Methods: We use analytic solutions of the kinematic magnetohydrodynamic (MHD)
equations to construct the models. Particle orbits are calculated using the
guiding centre approximation.
  Results: We present a general theoretical framework for constructing
kinematic MHD models of collapsing magnetic traps in 3D and in 2D with shear
flow. A few illustrative examples of collapsing trap models are presented,
together with some preliminary studies of particle orbits. For these example
orbits, the energy increases roughly by a factor of 5 or 6, which is consistent
with the energy increase found in previous 2D models.