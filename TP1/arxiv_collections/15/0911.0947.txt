We consider operators of the form ${\mathcal L}=-L-V$, where $L$ is an
elliptic operator and $V$ is a singular potential, defined on a smooth bounded
domain $\Omega\subset \R^n$ with Dirichlet boundary conditions. We allow the
boundary of $\Omega$ to be made of various pieces of different codimension. We
assume that ${\mathcal L}$ has a generalized first eigenfunction of which we
know two sided estimates. Under these assumptions we prove optimal Sobolev
inequalities for the operator ${\mathcal L}$, we show that it generates an
intrinsic ultracontractive semigroup and finally we derive a parabolic Harnack
inequality up to the boundary as well as sharp heat kernel estimates.