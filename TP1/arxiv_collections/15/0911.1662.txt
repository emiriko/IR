We present a new model for credit index derivatives, in the top-down
approach. This model has a dynamic loss intensity process with volatility and
jumps and can include counterparty risk. It handles CDS, CDO tranches,
Nth-to-default and index swaptions. Using properties of affine models, we
derive closed formulas for the pricing of index CDS, CDO tranches and
Nth-to-default. For index swaptions, we give an exact pricing and an
approximate faster method. We finally show calibration results on 2009 market
data.