We consider ensembles of sine-coupled phase oscillators consisting of
subpopulations of identical units, with a general heterogeneous coupling
between subpopulations. Using the Watanabe-Strogatz ansatz we reduce the
dynamics of the ensemble to a relatively small number of dynamical variables
plus microscopic constants of motion. This reduction is independent of the
sizes of subpopulations and remains valid in the thermodynamic limits, where
these sizes or/and the number of subpopulations are infinite. We demonstrate
that the approach to the dynamics of such systems, recently proposed by Ott and
Antonsen, corresponds to a particular choice of microscopic constants of
motion. The theory is applied to the standard Kuramoto model and to the
description of two interacting subpopulations, exhibiting a chimera state.
Furthermore, we analyze the dynamics of the extension of the Kuramoto model for
the case of nonlinear coupling and demonstrate the multistability of
synchronous states.