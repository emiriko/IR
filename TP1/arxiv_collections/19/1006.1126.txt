Motivated by constraint-based CAD software, we develop the foundation for the
rigidity theory of a very general model: the body-and-cad structure, composed
of rigid bodies in 3D constrained by pairwise coincidence, angular and distance
constraints. We identify 21 relevant geometric constraints and develop the
corresponding infinitesimal rigidity theory for these structures. The classical
body-and-bar rigidity model can be viewed as a body-and-cad structure that uses
only one constraint from this new class. As a consequence, we identify a new,
necessary, but not sufficient, counting condition for minimal rigidity of
body-and-cad structures: nested sparsity. This is a slight generalization of
the well-known sparsity condition of Maxwell.