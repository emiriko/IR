We define a diagonal entropy (d-entropy) for an arbitrary Hamiltonian system
as $S_d=-\sum_n \rho_{nn}\ln \rho_{nn}$ with the sum taken over the basis of
instantaneous energy states. In equilibrium this entropy coincides with the
conventional von Neumann entropy $S_n=-{\rm Tr}\, \rho\ln\rho$. However, in
contrast to $S_n$, the d-entropy is not conserved in time in closed Hamiltonian
systems. If the system is initially in stationary state then in accord with the
second law of thermodynamics the d-entropy can only increase or stay the same.
We also show that the d-entropy can be expressed through the energy
distribution function and thus it is measurable, at least in principle. Under
very generic assumptions of the locality of the Hamiltonian and
non-integrability the d-entropy becomes a unique function of the average energy
in large systems and automatically satisfies the fundamental thermodynamic
relation. This relation reduces to the first law of thermodynamics for
quasi-static processes. The d-entropy is also automatically conserved for
adiabatic processes. We illustrate our results with explicit examples and show
that $S_d$ behaves consistently with expectations from thermodynamics.