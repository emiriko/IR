We investigate the column density distribution function of neutral hydrogen
at redshift z = 3 using a cosmological simulation of galaxy formation from the
OverWhelmingly Large Simulations (OWLS) project. The base simulation includes
gravity, hydrodynamics, star formation, supernovae feedback, stellar winds,
chemodynamics, and element-by-element cooling in the presence of a uniform UV
background. Self-shielding and formation of molecular hydrogen are treated in
post-processing, without introducing any free parameters, using an accurate
reverse ray-tracing algorithm and an empirical relation between gas pressure
and molecular mass fraction. The simulation reproduces the observed z = 3
abundance of Ly-A forest, Lyman Limit and Damped Ly-A HI absorption systems
probed by quasar sight lines over ten orders of magnitude in column density.
Self-shielding flattens the column density distribution for NHI > 10^18 cm-2,
while the conversion to fully neutral gas and conversion of HI to H2 steepen it
around column densities of NHI = 10^20.3 cm-2 and NHI = 10^21.5 cm-2,
respectively.