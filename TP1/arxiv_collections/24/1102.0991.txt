We study equations on a principal bundle over a compact complex manifold
coupling a connection on the bundle with a Kahler structure on the base. These
equations generalize the conditions of constant scalar curvature for a Kahler
metric and Hermite-Yang-Mills for a connection. We provide a moment map
interpretation of the equations and study obstructions for the existence of
solutions, generalizing the Futaki invariant, the Mabuchi K-energy and geodesic
stability. We finish by giving some examples of solutions.