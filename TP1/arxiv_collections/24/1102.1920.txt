We present a generalized definition of subspace occupancy matrices in ab
initio methods for strongly correlated materials, such as DFT+U and DFT+DMFT,
which is appropriate to the case of nonorthogonal projector functions. By
enforcing the tensorial consistency of all matrix operations, we are led to a
subspace projection operator for which the occupancy matrix is tensorial and
accumulates only contributions which are local to the correlated subspace at
hand. For DFT+U in particular, the resulting contributions to the potential and
ionic forces are automatically Hermitian, without resort to symmetrization, and
localized to their corresponding correlated subspace. The tensorial invariance
of the occupancies, energies and ionic forces is preserved. We illustrate the
effect of this formalism in a DFT+U study using self-consistently determined
projectors.