Canonical quantization of gravity requires knowledge about the representation
theory of its constraint algebra, which is physically equivalent to the algebra
of arbitrary 4-diffeomorphisms. All interesting lowest-energy representations
are projective, making the relevant algebra into a four-dimensional
generalization of the Virasoro algebra. Such diffeomorphism anomalies are
invisible in field theory, because the relevant cocycles are functionals of the
observer's trajectory in spacetime. The multi-dimensional Virasoro algebra acts
naturally in the phase space of arbitrary histories, with dynamics playing the
role of first-class constraints. General relativity is regularized by expanding
all fields in Taylor series around the observer's trajectory, and truncating at
some fixed order. This regularized but manifestly general-covariant theory is
quantized in the history phase space, and dynamics is imposed afterwards, in
analogy with BRST quantization. Infinities arise when the regularization is
removed; it is presently unclear how these should be dealt with.